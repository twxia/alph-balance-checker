"use strict";var st=Object.defineProperty;var b=(r,e)=>st(r,"name",{value:e,configurable:!0});var c=require("./local-typescript-loader-CmIewcVg.js"),it=require("path"),ut=require("tty"),ot=require("os"),ct=require("module"),lt=require("magic-string"),de=typeof document<"u"?document.currentScript:null;function ft(r){var e=Object.create(null);return r&&Object.keys(r).forEach(function(t){if(t!=="default"){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:b(function(){return r[t]},"get")})}}),e.default=r,Object.freeze(e)}b(ft,"_interopNamespaceDefault");var T=ft(it),W={},P={},j={};Object.defineProperty(j,"__esModule",{value:!0}),j.default=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyus]{1,6}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g,j.matchToToken=function(r){var e={type:"invalid",value:r[0],closed:void 0};return r[1]?(e.type="string",e.closed=!!(r[3]||r[4])):r[5]?e.type="comment":r[6]?(e.type="comment",e.closed=!!r[7]):r[8]?e.type="regex":r[9]?e.type="number":r[10]?e.type="name":r[11]?e.type="punctuator":r[12]&&(e.type="whitespace"),e};var me={},$={};Object.defineProperty($,"__esModule",{value:!0}),$.isIdentifierChar=ye,$.isIdentifierName=ht,$.isIdentifierStart=ge;let G="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",he="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\u30FB\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F\uFF65";const pt=new RegExp("["+G+"]"),dt=new RegExp("["+G+he+"]");G=he=null;const be=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],mt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239];function z(r,e){let t=65536;for(let n=0,o=e.length;n<o;n+=2){if(t+=e[n],t>r)return!1;if(t+=e[n+1],t>=r)return!0}return!1}b(z,"isInAstralSet");function ge(r){return r<65?r===36:r<=90?!0:r<97?r===95:r<=122?!0:r<=65535?r>=170&&pt.test(String.fromCharCode(r)):z(r,be)}b(ge,"isIdentifierStart");function ye(r){return r<48?r===36:r<58?!0:r<65?!1:r<=90?!0:r<97?r===95:r<=122?!0:r<=65535?r>=170&&dt.test(String.fromCharCode(r)):z(r,be)||z(r,mt)}b(ye,"isIdentifierChar");function ht(r){let e=!0;for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);if((n&64512)===55296&&t+1<r.length){const o=r.charCodeAt(++t);(o&64512)===56320&&(n=65536+((n&1023)<<10)+(o&1023))}if(e){if(e=!1,!ge(n))return!1}else if(!ye(n))return!1}return!e}b(ht,"isIdentifierName");var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.isKeyword=xt,M.isReservedWord=ve,M.isStrictBindOnlyReservedWord=we,M.isStrictBindReservedWord=vt,M.isStrictReservedWord=xe;const V={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},bt=new Set(V.keyword),gt=new Set(V.strict),yt=new Set(V.strictBind);function ve(r,e){return e&&r==="await"||r==="enum"}b(ve,"isReservedWord");function xe(r,e){return ve(r,e)||gt.has(r)}b(xe,"isStrictReservedWord");function we(r){return yt.has(r)}b(we,"isStrictBindOnlyReservedWord");function vt(r,e){return xe(r,e)||we(r)}b(vt,"isStrictBindReservedWord");function xt(r){return bt.has(r)}b(xt,"isKeyword"),function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isIdentifierChar",{enumerable:!0,get:b(function(){return e.isIdentifierChar},"get")}),Object.defineProperty(r,"isIdentifierName",{enumerable:!0,get:b(function(){return e.isIdentifierName},"get")}),Object.defineProperty(r,"isIdentifierStart",{enumerable:!0,get:b(function(){return e.isIdentifierStart},"get")}),Object.defineProperty(r,"isKeyword",{enumerable:!0,get:b(function(){return t.isKeyword},"get")}),Object.defineProperty(r,"isReservedWord",{enumerable:!0,get:b(function(){return t.isReservedWord},"get")}),Object.defineProperty(r,"isStrictBindOnlyReservedWord",{enumerable:!0,get:b(function(){return t.isStrictBindOnlyReservedWord},"get")}),Object.defineProperty(r,"isStrictBindReservedWord",{enumerable:!0,get:b(function(){return t.isStrictBindReservedWord},"get")}),Object.defineProperty(r,"isStrictReservedWord",{enumerable:!0,get:b(function(){return t.isStrictReservedWord},"get")});var e=$,t=M}(me);function wt(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}b(wt,"commonjsRequire");var U={exports:{}};let Se=process.argv||[],A=process.env,St=!("NO_COLOR"in A||Se.includes("--no-color"))&&("FORCE_COLOR"in A||Se.includes("--color")||process.platform==="win32"||wt!=null&&ut.isatty(1)&&A.TERM!=="dumb"||"CI"in A),Et=b((r,e,t=r)=>n=>{let o=""+n,h=o.indexOf(e,r.length);return~h?r+Ct(o,e,t,h)+e:r+o+e},"formatter"),Ct=b((r,e,t,n)=>{let o="",h=0;do o+=r.substring(h,n)+t,h=n+e.length,n=r.indexOf(e,h);while(~n);return o+r.substring(h)},"replaceClose"),Ee=b((r=St)=>{let e=r?Et:()=>String;return{isColorSupported:r,reset:e("\x1B[0m","\x1B[0m"),bold:e("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:e("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:e("\x1B[3m","\x1B[23m"),underline:e("\x1B[4m","\x1B[24m"),inverse:e("\x1B[7m","\x1B[27m"),hidden:e("\x1B[8m","\x1B[28m"),strikethrough:e("\x1B[9m","\x1B[29m"),black:e("\x1B[30m","\x1B[39m"),red:e("\x1B[31m","\x1B[39m"),green:e("\x1B[32m","\x1B[39m"),yellow:e("\x1B[33m","\x1B[39m"),blue:e("\x1B[34m","\x1B[39m"),magenta:e("\x1B[35m","\x1B[39m"),cyan:e("\x1B[36m","\x1B[39m"),white:e("\x1B[37m","\x1B[39m"),gray:e("\x1B[90m","\x1B[39m"),bgBlack:e("\x1B[40m","\x1B[49m"),bgRed:e("\x1B[41m","\x1B[49m"),bgGreen:e("\x1B[42m","\x1B[49m"),bgYellow:e("\x1B[43m","\x1B[49m"),bgBlue:e("\x1B[44m","\x1B[49m"),bgMagenta:e("\x1B[45m","\x1B[49m"),bgCyan:e("\x1B[46m","\x1B[49m"),bgWhite:e("\x1B[47m","\x1B[49m")}},"createColors");U.exports=Ee(),U.exports.createColors=Ee;var Ce=U.exports,H={exports:{}},X,Te;function Tt(){if(Te)return X;Te=1;var r=/[|\\{}()[\]^$+*?.]/g;return X=b(function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(r,"\\$&")},"escapeStringRegexp"),X}b(Tt,"requireEscapeStringRegexp");var L={exports:{}},Y={exports:{}},J,Ne;function Nt(){return Ne||(Ne=1,J={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),J}b(Nt,"requireColorName");var Oe;function ke(){if(Oe)return Y.exports;Oe=1;var r=Nt(),e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);var n=Y.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var o in n)if(n.hasOwnProperty(o)){if(!("channels"in n[o]))throw new Error("missing channels property: "+o);if(!("labels"in n[o]))throw new Error("missing channel labels property: "+o);if(n[o].labels.length!==n[o].channels)throw new Error("channel and label counts mismatch: "+o);var h=n[o].channels,p=n[o].labels;delete n[o].channels,delete n[o].labels,Object.defineProperty(n[o],"channels",{value:h}),Object.defineProperty(n[o],"labels",{value:p})}n.rgb.hsl=function(a){var s=a[0]/255,i=a[1]/255,u=a[2]/255,l=Math.min(s,i,u),m=Math.max(s,i,u),f=m-l,d,y,v;return m===l?d=0:s===m?d=(i-u)/f:i===m?d=2+(u-s)/f:u===m&&(d=4+(s-i)/f),d=Math.min(d*60,360),d<0&&(d+=360),v=(l+m)/2,m===l?y=0:v<=.5?y=f/(m+l):y=f/(2-m-l),[d,y*100,v*100]},n.rgb.hsv=function(a){var s,i,u,l,m,f=a[0]/255,d=a[1]/255,y=a[2]/255,v=Math.max(f,d,y),w=v-Math.min(f,d,y),x=b(function(S){return(v-S)/6/w+1/2},"diffc");return w===0?l=m=0:(m=w/v,s=x(f),i=x(d),u=x(y),f===v?l=u-i:d===v?l=1/3+s-u:y===v&&(l=2/3+i-s),l<0?l+=1:l>1&&(l-=1)),[l*360,m*100,v*100]},n.rgb.hwb=function(a){var s=a[0],i=a[1],u=a[2],l=n.rgb.hsl(a)[0],m=1/255*Math.min(s,Math.min(i,u));return u=1-1/255*Math.max(s,Math.max(i,u)),[l,m*100,u*100]},n.rgb.cmyk=function(a){var s=a[0]/255,i=a[1]/255,u=a[2]/255,l,m,f,d;return d=Math.min(1-s,1-i,1-u),l=(1-s-d)/(1-d)||0,m=(1-i-d)/(1-d)||0,f=(1-u-d)/(1-d)||0,[l*100,m*100,f*100,d*100]};function g(a,s){return Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2)+Math.pow(a[2]-s[2],2)}return b(g,"comparativeDistance"),n.rgb.keyword=function(a){var s=e[a];if(s)return s;var i=1/0,u;for(var l in r)if(r.hasOwnProperty(l)){var m=r[l],f=g(a,m);f<i&&(i=f,u=l)}return u},n.keyword.rgb=function(a){return r[a]},n.rgb.xyz=function(a){var s=a[0]/255,i=a[1]/255,u=a[2]/255;s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,u=u>.04045?Math.pow((u+.055)/1.055,2.4):u/12.92;var l=s*.4124+i*.3576+u*.1805,m=s*.2126+i*.7152+u*.0722,f=s*.0193+i*.1192+u*.9505;return[l*100,m*100,f*100]},n.rgb.lab=function(a){var s=n.rgb.xyz(a),i=s[0],u=s[1],l=s[2],m,f,d;return i/=95.047,u/=100,l/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,l=l>.008856?Math.pow(l,1/3):7.787*l+16/116,m=116*u-16,f=500*(i-u),d=200*(u-l),[m,f,d]},n.hsl.rgb=function(a){var s=a[0]/360,i=a[1]/100,u=a[2]/100,l,m,f,d,y;if(i===0)return y=u*255,[y,y,y];u<.5?m=u*(1+i):m=u+i-u*i,l=2*u-m,d=[0,0,0];for(var v=0;v<3;v++)f=s+1/3*-(v-1),f<0&&f++,f>1&&f--,6*f<1?y=l+(m-l)*6*f:2*f<1?y=m:3*f<2?y=l+(m-l)*(2/3-f)*6:y=l,d[v]=y*255;return d},n.hsl.hsv=function(a){var s=a[0],i=a[1]/100,u=a[2]/100,l=i,m=Math.max(u,.01),f,d;return u*=2,i*=u<=1?u:2-u,l*=m<=1?m:2-m,d=(u+i)/2,f=u===0?2*l/(m+l):2*i/(u+i),[s,f*100,d*100]},n.hsv.rgb=function(a){var s=a[0]/60,i=a[1]/100,u=a[2]/100,l=Math.floor(s)%6,m=s-Math.floor(s),f=255*u*(1-i),d=255*u*(1-i*m),y=255*u*(1-i*(1-m));switch(u*=255,l){case 0:return[u,y,f];case 1:return[d,u,f];case 2:return[f,u,y];case 3:return[f,d,u];case 4:return[y,f,u];case 5:return[u,f,d]}},n.hsv.hsl=function(a){var s=a[0],i=a[1]/100,u=a[2]/100,l=Math.max(u,.01),m,f,d;return d=(2-i)*u,m=(2-i)*l,f=i*l,f/=m<=1?m:2-m,f=f||0,d/=2,[s,f*100,d*100]},n.hwb.rgb=function(a){var s=a[0]/360,i=a[1]/100,u=a[2]/100,l=i+u,m,f,d,y;l>1&&(i/=l,u/=l),m=Math.floor(6*s),f=1-u,d=6*s-m,m&1&&(d=1-d),y=i+d*(f-i);var v,w,x;switch(m){default:case 6:case 0:v=f,w=y,x=i;break;case 1:v=y,w=f,x=i;break;case 2:v=i,w=f,x=y;break;case 3:v=i,w=y,x=f;break;case 4:v=y,w=i,x=f;break;case 5:v=f,w=i,x=y;break}return[v*255,w*255,x*255]},n.cmyk.rgb=function(a){var s=a[0]/100,i=a[1]/100,u=a[2]/100,l=a[3]/100,m,f,d;return m=1-Math.min(1,s*(1-l)+l),f=1-Math.min(1,i*(1-l)+l),d=1-Math.min(1,u*(1-l)+l),[m*255,f*255,d*255]},n.xyz.rgb=function(a){var s=a[0]/100,i=a[1]/100,u=a[2]/100,l,m,f;return l=s*3.2406+i*-1.5372+u*-.4986,m=s*-.9689+i*1.8758+u*.0415,f=s*.0557+i*-.204+u*1.057,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l*12.92,m=m>.0031308?1.055*Math.pow(m,1/2.4)-.055:m*12.92,f=f>.0031308?1.055*Math.pow(f,1/2.4)-.055:f*12.92,l=Math.min(Math.max(0,l),1),m=Math.min(Math.max(0,m),1),f=Math.min(Math.max(0,f),1),[l*255,m*255,f*255]},n.xyz.lab=function(a){var s=a[0],i=a[1],u=a[2],l,m,f;return s/=95.047,i/=100,u/=108.883,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,l=116*i-16,m=500*(s-i),f=200*(i-u),[l,m,f]},n.lab.xyz=function(a){var s=a[0],i=a[1],u=a[2],l,m,f;m=(s+16)/116,l=i/500+m,f=m-u/200;var d=Math.pow(m,3),y=Math.pow(l,3),v=Math.pow(f,3);return m=d>.008856?d:(m-16/116)/7.787,l=y>.008856?y:(l-16/116)/7.787,f=v>.008856?v:(f-16/116)/7.787,l*=95.047,m*=100,f*=108.883,[l,m,f]},n.lab.lch=function(a){var s=a[0],i=a[1],u=a[2],l,m,f;return l=Math.atan2(u,i),m=l*360/2/Math.PI,m<0&&(m+=360),f=Math.sqrt(i*i+u*u),[s,f,m]},n.lch.lab=function(a){var s=a[0],i=a[1],u=a[2],l,m,f;return f=u/360*2*Math.PI,l=i*Math.cos(f),m=i*Math.sin(f),[s,l,m]},n.rgb.ansi16=function(a){var s=a[0],i=a[1],u=a[2],l=1 in arguments?arguments[1]:n.rgb.hsv(a)[2];if(l=Math.round(l/50),l===0)return 30;var m=30+(Math.round(u/255)<<2|Math.round(i/255)<<1|Math.round(s/255));return l===2&&(m+=60),m},n.hsv.ansi16=function(a){return n.rgb.ansi16(n.hsv.rgb(a),a[2])},n.rgb.ansi256=function(a){var s=a[0],i=a[1],u=a[2];if(s===i&&i===u)return s<8?16:s>248?231:Math.round((s-8)/247*24)+232;var l=16+36*Math.round(s/255*5)+6*Math.round(i/255*5)+Math.round(u/255*5);return l},n.ansi16.rgb=function(a){var s=a%10;if(s===0||s===7)return a>50&&(s+=3.5),s=s/10.5*255,[s,s,s];var i=(~~(a>50)+1)*.5,u=(s&1)*i*255,l=(s>>1&1)*i*255,m=(s>>2&1)*i*255;return[u,l,m]},n.ansi256.rgb=function(a){if(a>=232){var s=(a-232)*10+8;return[s,s,s]}a-=16;var i,u=Math.floor(a/36)/5*255,l=Math.floor((i=a%36)/6)/5*255,m=i%6/5*255;return[u,l,m]},n.rgb.hex=function(a){var s=((Math.round(a[0])&255)<<16)+((Math.round(a[1])&255)<<8)+(Math.round(a[2])&255),i=s.toString(16).toUpperCase();return"000000".substring(i.length)+i},n.hex.rgb=function(a){var s=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!s)return[0,0,0];var i=s[0];s[0].length===3&&(i=i.split("").map(function(d){return d+d}).join(""));var u=parseInt(i,16),l=u>>16&255,m=u>>8&255,f=u&255;return[l,m,f]},n.rgb.hcg=function(a){var s=a[0]/255,i=a[1]/255,u=a[2]/255,l=Math.max(Math.max(s,i),u),m=Math.min(Math.min(s,i),u),f=l-m,d,y;return f<1?d=m/(1-f):d=0,f<=0?y=0:l===s?y=(i-u)/f%6:l===i?y=2+(u-s)/f:y=4+(s-i)/f+4,y/=6,y%=1,[y*360,f*100,d*100]},n.hsl.hcg=function(a){var s=a[1]/100,i=a[2]/100,u=1,l=0;return i<.5?u=2*s*i:u=2*s*(1-i),u<1&&(l=(i-.5*u)/(1-u)),[a[0],u*100,l*100]},n.hsv.hcg=function(a){var s=a[1]/100,i=a[2]/100,u=s*i,l=0;return u<1&&(l=(i-u)/(1-u)),[a[0],u*100,l*100]},n.hcg.rgb=function(a){var s=a[0]/360,i=a[1]/100,u=a[2]/100;if(i===0)return[u*255,u*255,u*255];var l=[0,0,0],m=s%1*6,f=m%1,d=1-f,y=0;switch(Math.floor(m)){case 0:l[0]=1,l[1]=f,l[2]=0;break;case 1:l[0]=d,l[1]=1,l[2]=0;break;case 2:l[0]=0,l[1]=1,l[2]=f;break;case 3:l[0]=0,l[1]=d,l[2]=1;break;case 4:l[0]=f,l[1]=0,l[2]=1;break;default:l[0]=1,l[1]=0,l[2]=d}return y=(1-i)*u,[(i*l[0]+y)*255,(i*l[1]+y)*255,(i*l[2]+y)*255]},n.hcg.hsv=function(a){var s=a[1]/100,i=a[2]/100,u=s+i*(1-s),l=0;return u>0&&(l=s/u),[a[0],l*100,u*100]},n.hcg.hsl=function(a){var s=a[1]/100,i=a[2]/100,u=i*(1-s)+.5*s,l=0;return u>0&&u<.5?l=s/(2*u):u>=.5&&u<1&&(l=s/(2*(1-u))),[a[0],l*100,u*100]},n.hcg.hwb=function(a){var s=a[1]/100,i=a[2]/100,u=s+i*(1-s);return[a[0],(u-s)*100,(1-u)*100]},n.hwb.hcg=function(a){var s=a[1]/100,i=a[2]/100,u=1-i,l=u-s,m=0;return l<1&&(m=(u-l)/(1-l)),[a[0],l*100,m*100]},n.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]},n.rgb.apple=function(a){return[a[0]/255*65535,a[1]/255*65535,a[2]/255*65535]},n.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]},n.gray.hsl=n.gray.hsv=function(a){return[0,0,a[0]]},n.gray.hwb=function(a){return[0,100,a[0]]},n.gray.cmyk=function(a){return[0,0,0,a[0]]},n.gray.lab=function(a){return[a[0],0,0]},n.gray.hex=function(a){var s=Math.round(a[0]/100*255)&255,i=(s<<16)+(s<<8)+s,u=i.toString(16).toUpperCase();return"000000".substring(u.length)+u},n.rgb.gray=function(a){var s=(a[0]+a[1]+a[2])/3;return[s/255*100]},Y.exports}b(ke,"requireConversions");var Q,De;function Ot(){if(De)return Q;De=1;var r=ke();function e(){for(var h={},p=Object.keys(r),g=p.length,a=0;a<g;a++)h[p[a]]={distance:-1,parent:null};return h}b(e,"buildGraph");function t(h){var p=e(),g=[h];for(p[h].distance=0;g.length;)for(var a=g.pop(),s=Object.keys(r[a]),i=s.length,u=0;u<i;u++){var l=s[u],m=p[l];m.distance===-1&&(m.distance=p[a].distance+1,m.parent=a,g.unshift(l))}return p}b(t,"deriveBFS");function n(h,p){return function(g){return p(h(g))}}b(n,"link");function o(h,p){for(var g=[p[h].parent,h],a=r[p[h].parent][h],s=p[h].parent;p[s].parent;)g.unshift(p[s].parent),a=n(r[p[s].parent][s],a),s=p[s].parent;return a.conversion=g,a}return b(o,"wrapConversion"),Q=b(function(h){for(var p=t(h),g={},a=Object.keys(p),s=a.length,i=0;i<s;i++){var u=a[i],l=p[u];l.parent!==null&&(g[u]=o(u,p))}return g},"route"),Q}b(Ot,"requireRoute");var Z,Re;function kt(){if(Re)return Z;Re=1;var r=ke(),e=Ot(),t={},n=Object.keys(r);function o(p){var g=b(function(a){return a==null?a:(arguments.length>1&&(a=Array.prototype.slice.call(arguments)),p(a))},"wrappedFn");return"conversion"in p&&(g.conversion=p.conversion),g}b(o,"wrapRaw");function h(p){var g=b(function(a){if(a==null)return a;arguments.length>1&&(a=Array.prototype.slice.call(arguments));var s=p(a);if(typeof s=="object")for(var i=s.length,u=0;u<i;u++)s[u]=Math.round(s[u]);return s},"wrappedFn");return"conversion"in p&&(g.conversion=p.conversion),g}return b(h,"wrapRounded"),n.forEach(function(p){t[p]={},Object.defineProperty(t[p],"channels",{value:r[p].channels}),Object.defineProperty(t[p],"labels",{value:r[p].labels});var g=e(p),a=Object.keys(g);a.forEach(function(s){var i=g[s];t[p][s]=h(i),t[p][s].raw=o(i)})}),Z=t,Z}b(kt,"requireColorConvert"),L.exports;var Me;function Dt(){return Me||(Me=1,function(r){const e=kt(),t=b((p,g)=>function(){return`\x1B[${p.apply(e,arguments)+g}m`},"wrapAnsi16"),n=b((p,g)=>function(){const a=p.apply(e,arguments);return`\x1B[${38+g};5;${a}m`},"wrapAnsi256"),o=b((p,g)=>function(){const a=p.apply(e,arguments);return`\x1B[${38+g};2;${a[0]};${a[1]};${a[2]}m`},"wrapAnsi16m");function h(){const p=new Map,g={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};g.color.grey=g.color.gray;for(const i of Object.keys(g)){const u=g[i];for(const l of Object.keys(u)){const m=u[l];g[l]={open:`\x1B[${m[0]}m`,close:`\x1B[${m[1]}m`},u[l]=g[l],p.set(m[0],m[1])}Object.defineProperty(g,i,{value:u,enumerable:!1}),Object.defineProperty(g,"codes",{value:p,enumerable:!1})}const a=b(i=>i,"ansi2ansi"),s=b((i,u,l)=>[i,u,l],"rgb2rgb");g.color.close="\x1B[39m",g.bgColor.close="\x1B[49m",g.color.ansi={ansi:t(a,0)},g.color.ansi256={ansi256:n(a,0)},g.color.ansi16m={rgb:o(s,0)},g.bgColor.ansi={ansi:t(a,10)},g.bgColor.ansi256={ansi256:n(a,10)},g.bgColor.ansi16m={rgb:o(s,10)};for(let i of Object.keys(e)){if(typeof e[i]!="object")continue;const u=e[i];i==="ansi16"&&(i="ansi"),"ansi16"in u&&(g.color.ansi[i]=t(u.ansi16,0),g.bgColor.ansi[i]=t(u.ansi16,10)),"ansi256"in u&&(g.color.ansi256[i]=n(u.ansi256,0),g.bgColor.ansi256[i]=n(u.ansi256,10)),"rgb"in u&&(g.color.ansi16m[i]=o(u.rgb,0),g.bgColor.ansi16m[i]=o(u.rgb,10))}return g}b(h,"assembleStyles"),Object.defineProperty(r,"exports",{enumerable:!0,get:h})}(L)),L.exports}b(Dt,"requireAnsiStyles");var ee,Ie;function Rt(){return Ie||(Ie=1,ee=b((r,e)=>{e=e||process.argv;const t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),o=e.indexOf("--");return n!==-1&&(o===-1?!0:n<o)},"hasFlag")),ee}b(Rt,"requireHasFlag");var te,Fe;function Mt(){if(Fe)return te;Fe=1;const r=ot,e=Rt(),t=process.env;let n;e("no-color")||e("no-colors")||e("color=false")?n=!1:(e("color")||e("colors")||e("color=true")||e("color=always"))&&(n=!0),"FORCE_COLOR"in t&&(n=t.FORCE_COLOR.length===0||parseInt(t.FORCE_COLOR,10)!==0);function o(g){return g===0?!1:{level:g,hasBasic:!0,has256:g>=2,has16m:g>=3}}b(o,"translateLevel");function h(g){if(n===!1)return 0;if(e("color=16m")||e("color=full")||e("color=truecolor"))return 3;if(e("color=256"))return 2;if(g&&!g.isTTY&&n!==!0)return 0;const a=n?1:0;if(process.platform==="win32"){const s=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in t)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(s=>s in t)||t.CI_NAME==="codeship"?1:a;if("TEAMCITY_VERSION"in t)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(t.TEAMCITY_VERSION)?1:0;if(t.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in t){const s=parseInt((t.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(t.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(t.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(t.TERM)||"COLORTERM"in t?1:(t.TERM==="dumb",a)}b(h,"supportsColor");function p(g){const a=h(g);return o(a)}return b(p,"getSupportLevel"),te={supportsColor:p,stdout:p(process.stdout),stderr:p(process.stderr)},te}b(Mt,"requireSupportsColor");var re,Pe;function It(){if(Pe)return re;Pe=1;const r=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,e=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,t=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,n=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,o=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function h(s){return s[0]==="u"&&s.length===5||s[0]==="x"&&s.length===3?String.fromCharCode(parseInt(s.slice(1),16)):o.get(s)||s}b(h,"unescape");function p(s,i){const u=[],l=i.trim().split(/\s*,\s*/g);let m;for(const f of l)if(!isNaN(f))u.push(Number(f));else if(m=f.match(t))u.push(m[2].replace(n,(d,y,v)=>y?h(y):v));else throw new Error(`Invalid Chalk template style argument: ${f} (in style '${s}')`);return u}b(p,"parseArguments");function g(s){e.lastIndex=0;const i=[];let u;for(;(u=e.exec(s))!==null;){const l=u[1];if(u[2]){const m=p(l,u[2]);i.push([l].concat(m))}else i.push([l])}return i}b(g,"parseStyle");function a(s,i){const u={};for(const m of i)for(const f of m.styles)u[f[0]]=m.inverse?null:f.slice(1);let l=s;for(const m of Object.keys(u))if(Array.isArray(u[m])){if(!(m in l))throw new Error(`Unknown Chalk style: ${m}`);u[m].length>0?l=l[m].apply(l,u[m]):l=l[m]}return l}return b(a,"buildStyle"),re=b((s,i)=>{const u=[],l=[];let m=[];if(i.replace(r,(f,d,y,v,w,x)=>{if(d)m.push(h(d));else if(v){const S=m.join("");m=[],l.push(u.length===0?S:a(s,u)(S)),u.push({inverse:y,styles:g(v)})}else if(w){if(u.length===0)throw new Error("Found extraneous } in Chalk template literal");l.push(a(s,u)(m.join(""))),m=[],u.pop()}else m.push(x)}),l.push(m.join("")),u.length>0){const f=`Chalk template literal is missing ${u.length} closing bracket${u.length===1?"":"s"} (\`}\`)`;throw new Error(f)}return l.join("")},"templates"),re}b(It,"requireTemplates");var $e;function Ft(){return $e||($e=1,function(r){const e=Tt(),t=Dt(),n=Mt().stdout,o=It(),h=process.platform==="win32"&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),p=["ansi","ansi","ansi256","ansi16m"],g=new Set(["gray"]),a=Object.create(null);function s(d,y){y=y||{};const v=n?n.level:0;d.level=y.level===void 0?v:y.level,d.enabled="enabled"in y?y.enabled:d.level>0}b(s,"applyOptions");function i(d){if(!this||!(this instanceof i)||this.template){const y={};return s(y,d),y.template=function(){const v=[].slice.call(arguments);return f.apply(null,[y.template].concat(v))},Object.setPrototypeOf(y,i.prototype),Object.setPrototypeOf(y.template,y),y.template.constructor=i,y.template}s(this,d)}b(i,"Chalk"),h&&(t.blue.open="\x1B[94m");for(const d of Object.keys(t))t[d].closeRe=new RegExp(e(t[d].close),"g"),a[d]={get(){const y=t[d];return l.call(this,this._styles?this._styles.concat(y):[y],this._empty,d)}};a.visible={get(){return l.call(this,this._styles||[],!0,"visible")}},t.color.closeRe=new RegExp(e(t.color.close),"g");for(const d of Object.keys(t.color.ansi))g.has(d)||(a[d]={get(){const y=this.level;return function(){const w={open:t.color[p[y]][d].apply(null,arguments),close:t.color.close,closeRe:t.color.closeRe};return l.call(this,this._styles?this._styles.concat(w):[w],this._empty,d)}}});t.bgColor.closeRe=new RegExp(e(t.bgColor.close),"g");for(const d of Object.keys(t.bgColor.ansi)){if(g.has(d))continue;const y="bg"+d[0].toUpperCase()+d.slice(1);a[y]={get(){const v=this.level;return function(){const x={open:t.bgColor[p[v]][d].apply(null,arguments),close:t.bgColor.close,closeRe:t.bgColor.closeRe};return l.call(this,this._styles?this._styles.concat(x):[x],this._empty,d)}}}}const u=Object.defineProperties(()=>{},a);function l(d,y,v){const w=b(function(){return m.apply(w,arguments)},"builder");w._styles=d,w._empty=y;const x=this;return Object.defineProperty(w,"level",{enumerable:!0,get(){return x.level},set(S){x.level=S}}),Object.defineProperty(w,"enabled",{enumerable:!0,get(){return x.enabled},set(S){x.enabled=S}}),w.hasGrey=this.hasGrey||v==="gray"||v==="grey",w.__proto__=u,w}b(l,"build");function m(){const d=arguments,y=d.length;let v=String(arguments[0]);if(y===0)return"";if(y>1)for(let x=1;x<y;x++)v+=" "+d[x];if(!this.enabled||this.level<=0||!v)return this._empty?"":v;const w=t.dim.open;h&&this.hasGrey&&(t.dim.open="");for(const x of this._styles.slice().reverse())v=x.open+v.replace(x.closeRe,x.open)+x.close,v=v.replace(/\r?\n/g,`${x.close}$&${x.open}`);return t.dim.open=w,v}b(m,"applyStyle");function f(d,y){if(!Array.isArray(y))return[].slice.call(arguments,1).join(" ");const v=[].slice.call(arguments,2),w=[y.raw[0]];for(let x=1;x<y.length;x++)w.push(String(v[x-1]).replace(/[{}\\]/g,"\\$&")),w.push(String(y.raw[x]));return o(d,w.join(""))}b(f,"chalkTag"),Object.defineProperties(i.prototype,a),r.exports=i(),r.exports.supportsColor=n,r.exports.default=r.exports}(H)),H.exports}b(Ft,"requireChalk"),Object.defineProperty(P,"__esModule",{value:!0}),P.default=Kt,P.shouldHighlight=qe;var _e=j,je=me,ne=Pt(Ce,!0);function Ae(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Ae=b(function(n){return n?t:e},"_getRequireWildcardCache$1"))(r)}b(Ae,"_getRequireWildcardCache$1");function Pt(r,e){if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Ae(e);if(t&&t.has(r))return t.get(r);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in r)if(h!=="default"&&{}.hasOwnProperty.call(r,h)){var p=o?Object.getOwnPropertyDescriptor(r,h):null;p&&(p.get||p.set)?Object.defineProperty(n,h,p):n[h]=r[h]}return n.default=r,t&&t.set(r,n),n}b(Pt,"_interopRequireWildcard$1");const Le=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,ne.createColors)(!1):ne.default,Be=b((r,e)=>t=>r(e(t)),"compose$1"),$t=new Set(["as","async","from","get","of","set"]);function _t(r){return{keyword:r.cyan,capitalized:r.yellow,jsxIdentifier:r.yellow,punctuator:r.yellow,number:r.magenta,string:r.green,regex:r.magenta,comment:r.gray,invalid:Be(Be(r.white,r.bgRed),r.bold)}}b(_t,"getDefs$1");const jt=/\r\n|[\n\r\u2028\u2029]/,At=/^[()[\]{}]$/;let Ke;{const r=/^[a-z][\w-]*$/i,e=b(function(t,n,o){if(t.type==="name"){if((0,je.isKeyword)(t.value)||(0,je.isStrictReservedWord)(t.value,!0)||$t.has(t.value))return"keyword";if(r.test(t.value)&&(o[n-1]==="<"||o.slice(n-2,n)==="</"))return"jsxIdentifier";if(t.value[0]!==t.value[0].toLowerCase())return"capitalized"}return t.type==="punctuator"&&At.test(t.value)?"bracket":t.type==="invalid"&&(t.value==="@"||t.value==="#")?"punctuator":t.type},"getTokenType");Ke=b(function*(t){let n;for(;n=_e.default.exec(t);){const o=_e.matchToToken(n);yield{type:e(o,n.index,t),value:o.value}}},"tokenize")}function Lt(r,e){let t="";for(const{type:n,value:o}of Ke(e)){const h=r[n];h?t+=o.split(jt).map(p=>h(p)).join(`
`):t+=o}return t}b(Lt,"highlightTokens");function qe(r){return Le.isColorSupported||r.forceColor}b(qe,"shouldHighlight");let ae;function Bt(r){if(r){var e;return(e=ae)!=null||(ae=(0,ne.createColors)(!0)),ae}return Le}b(Bt,"getColors$1");function Kt(r,e={}){if(r!==""&&qe(e)){const t=_t(Bt(e.forceColor));return Lt(t,r)}else return r}b(Kt,"highlight");{let r,e;P.getChalk=({forceColor:t})=>{var n;if((n=r)!=null||(r=Ft()),t){var o;return(o=e)!=null||(e=new r.constructor({enabled:!0,level:1})),e}return r}}Object.defineProperty(W,"__esModule",{value:!0}),W.codeFrameColumns=He,W.default=Ut;var We=P,se=qt(Ce,!0);function Ge(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Ge=b(function(n){return n?t:e},"_getRequireWildcardCache"))(r)}b(Ge,"_getRequireWildcardCache");function qt(r,e){if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Ge(e);if(t&&t.has(r))return t.get(r);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in r)if(h!=="default"&&Object.prototype.hasOwnProperty.call(r,h)){var p=o?Object.getOwnPropertyDescriptor(r,h):null;p&&(p.get||p.set)?Object.defineProperty(n,h,p):n[h]=r[h]}return n.default=r,t&&t.set(r,n),n}b(qt,"_interopRequireWildcard");const Wt=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,se.createColors)(!1):se.default,ze=b((r,e)=>t=>r(e(t)),"compose");let ie;function Gt(r){if(r){var e;return(e=ie)!=null||(ie=(0,se.createColors)(!0)),ie}return Wt}b(Gt,"getColors");let Ve=!1;function zt(r){return{gutter:r.gray,marker:ze(r.red,r.bold),message:ze(r.red,r.bold)}}b(zt,"getDefs");const Ue=/\r\n|[\n\r\u2028\u2029]/;function Vt(r,e,t){const n=Object.assign({column:0,line:-1},r.start),o=Object.assign({},n,r.end),{linesAbove:h=2,linesBelow:p=3}=t||{},g=n.line,a=n.column,s=o.line,i=o.column;let u=Math.max(g-(h+1),0),l=Math.min(e.length,s+p);g===-1&&(u=0),s===-1&&(l=e.length);const m=s-g,f={};if(m)for(let d=0;d<=m;d++){const y=d+g;if(!a)f[y]=!0;else if(d===0){const v=e[y-1].length;f[y]=[a,v-a+1]}else if(d===m)f[y]=[0,i];else{const v=e[y-d].length;f[y]=[0,v]}}else a===i?a?f[g]=[a,0]:f[g]=!0:f[g]=[a,i-a];return{start:u,end:l,markerLines:f}}b(Vt,"getMarkerLines");function He(r,e,t={}){const n=(t.highlightCode||t.forceColor)&&(0,We.shouldHighlight)(t),o=Gt(t.forceColor),h=zt(o),p=b((d,y)=>n?d(y):y,"maybeHighlight"),g=r.split(Ue),{start:a,end:s,markerLines:i}=Vt(e,g,t),u=e.start&&typeof e.start.column=="number",l=String(s).length;let f=(n?(0,We.default)(r,t):r).split(Ue,s).slice(a,s).map((d,y)=>{const v=a+1+y,x=` ${` ${v}`.slice(-l)} |`,S=i[v],D=!i[v+1];if(S){let C="";if(Array.isArray(S)){const k=d.slice(0,Math.max(S[0]-1,0)).replace(/[^\t]/g," "),R=S[1]||1;C=[`
 `,p(h.gutter,x.replace(/\d/g," "))," ",k,p(h.marker,"^").repeat(R)].join(""),D&&t.message&&(C+=" "+p(h.message,t.message))}return[p(h.marker,">"),p(h.gutter,x),d.length>0?` ${d}`:"",C].join("")}else return` ${p(h.gutter,x)}${d.length>0?` ${d}`:""}`}).join(`
`);return t.message&&!u&&(f=`${" ".repeat(l+1)}${t.message}
${f}`),n?o.reset(f):f}b(He,"codeFrameColumns");function Ut(r,e,t,n={}){if(!Ve){Ve=!0;const h="Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.";if(process.emitWarning)process.emitWarning(h,"DeprecationWarning");else{const p=new Error(h);p.name="DeprecationWarning",console.warn(new Error(h))}}return t=Math.max(t,0),He(r,{start:{column:t,line:e}},n)}b(Ut,"_default");function Ht(r){return{...r,compilerOptions:r.compilerOptions??{},respectExternal:r.respectExternal??!1}}b(Ht,"resolveDefaultOptions");const B=/\.d\.(c|m)?tsx?$/,Xe=".d.ts",ue={getCurrentDirectory:b(()=>c.ts.sys.getCurrentDirectory(),"getCurrentDirectory"),getNewLine:b(()=>c.ts.sys.newLine,"getNewLine"),getCanonicalFileName:c.ts.sys.useCaseSensitiveFileNames?r=>r:r=>r.toLowerCase()},Xt={declaration:!0,noEmit:!1,emitDeclarationOnly:!0,noEmitOnError:!0,checkJs:!1,declarationMap:!1,skipLibCheck:!0,preserveSymlinks:!0,target:c.ts.ScriptTarget.ESNext},_=new Map,F=b((...r)=>process.env.DTS_LOG_CACHE?console.log("[cache]",...r):null,"logCache");function Ye([r,e],t){for(F(r),_.set(r,t);r!==e&&r!==T.dirname(r);){if(r=T.dirname(r),F("up",r),_.has(r))return F("has",r);_.set(r,t)}}b(Ye,"cacheConfig");function oe(r,e,t){const n={...Xt,...e};let o=T.dirname(r),h=[];const p=t||o;if(_.has(p))F("HIT",p);else{F("miss",p);const i=t?T.resolve(process.cwd(),t):c.ts.findConfigFile(o,c.ts.sys.fileExists);if(!i)return{dtsFiles:h,dirName:o,compilerOptions:n};let u=o;o=T.dirname(i);const{config:l,error:m}=c.ts.readConfigFile(i,c.ts.sys.readFile);if(m)return console.error(c.ts.formatDiagnostic(m,ue)),{dtsFiles:h,dirName:o,compilerOptions:n};F("tsconfig",l);const f=c.ts.parseJsonConfigFileContent(l,c.ts.sys,o);Ye(t?[t,t]:[u,o],f)}const{fileNames:g,options:a,errors:s}=_.get(p);return h=g.filter(i=>B.test(i)),s.length?(console.error(c.ts.formatDiagnostics(s,ue)),{dtsFiles:h,dirName:o,compilerOptions:n}):{dtsFiles:h,dirName:o,compilerOptions:{...a,...n}}}b(oe,"getCompilerOptions");function Yt(r,e,t){const{dtsFiles:n,compilerOptions:o}=oe(r,e,t);return c.ts.createProgram([r].concat(Array.from(n)),o,c.ts.createCompilerHost(o,!0))}b(Yt,"createProgram$1");function Jt(r,e,t){const n=[];let o=[],h=new Set,p="",g={};for(let a of r){if(B.test(a))continue;a=T.resolve(a);const s=oe(a,e,t);if(s.dtsFiles.forEach(h.add,h),!o.length){o.push(a),{dirName:p,compilerOptions:g}=s;continue}if(s.dirName===p)o.push(a);else{const i=c.ts.createCompilerHost(g,!0),u=c.ts.createProgram(o.concat(Array.from(h)),g,i);n.push(u),o=[a],{dirName:p,compilerOptions:g}=s}}if(o.length){const a=c.ts.createCompilerHost(g,!0),s=c.ts.createProgram(o.concat(Array.from(h)),g,a);n.push(s)}return n}b(Jt,"createPrograms");function Qt(){let r;try{return{codeFrameColumns:r}=c.require("@babel/code-frame"),r}catch{try{return{codeFrameColumns:r}=ct.createRequire(typeof document>"u"?require("url").pathToFileURL(__filename).href:de&&de.src||new URL("rollup-plugin-dts-Bhb-wA8a.js",document.baseURI).href)("@babel/code-frame"),r}catch{}}}b(Qt,"getCodeFrame");function Zt(r){const e=r.getSourceFile(),t=e.getLineAndCharacterOfPosition(r.getStart()),n=e.getLineAndCharacterOfPosition(r.getEnd());return{start:{line:t.line+1,column:t.character+1},end:{line:n.line+1,column:n.character+1}}}b(Zt,"getLocation");function er(r){const e=Qt(),n=r.getSourceFile().getFullText(),o=Zt(r);return e?`
`+e(n,o,{highlightCode:!0}):`
${o.start.line}:${o.start.column}: \`${r.getFullText().trim()}\``}b(er,"frameNode");class E extends Error{static{b(this,"UnsupportedSyntaxError")}constructor(e,t="Syntax not yet supported"){super(`${t}
${er(e)}`)}}class tr{static{b(this,"NamespaceFixer")}constructor(e){this.sourceFile=e}findNamespaces(){const e=[],t={};for(const n of this.sourceFile.statements){const o={start:n.getStart(),end:n.getEnd()};if(c.ts.isEmptyStatement(n)){e.unshift({name:"",exports:[],location:o});continue}if((c.ts.isImportDeclaration(n)||c.ts.isExportDeclaration(n))&&n.moduleSpecifier&&c.ts.isStringLiteral(n.moduleSpecifier)){let{text:i}=n.moduleSpecifier;if(i.startsWith(".")&&(i.endsWith(".d.ts")||i.endsWith(".d.cts")||i.endsWith(".d.mts"))){let u=n.moduleSpecifier.getStart()+1,l=n.moduleSpecifier.getEnd()-1;e.unshift({name:"",exports:[],location:{start:u,end:l},textBeforeCodeAfter:i.replace(/\.d\.ts$/,".js").replace(/\.d\.cts$/,".cjs").replace(/\.d\.mts$/,".mjs")})}}if(c.ts.isModuleDeclaration(n)&&n.body&&c.ts.isModuleBlock(n.body)){for(const i of n.body.statements)if(c.ts.isExportDeclaration(i)&&i.exportClause){if(c.ts.isNamespaceExport(i.exportClause))continue;for(const u of i.exportClause.elements)u.propertyName&&u.propertyName.getText()==u.name.getText()&&e.unshift({name:"",exports:[],location:{start:u.propertyName.getEnd(),end:u.name.getEnd()}})}}if(c.ts.isClassDeclaration(n)?t[n.name.getText()]={type:"class",generics:n.typeParameters}:c.ts.isFunctionDeclaration(n)?t[n.name.getText()]={type:"function"}:c.ts.isInterfaceDeclaration(n)?t[n.name.getText()]={type:"interface",generics:n.typeParameters}:c.ts.isTypeAliasDeclaration(n)?t[n.name.getText()]={type:"type",generics:n.typeParameters}:c.ts.isModuleDeclaration(n)&&c.ts.isIdentifier(n.name)?t[n.name.getText()]={type:"namespace"}:c.ts.isEnumDeclaration(n)&&(t[n.name.getText()]={type:"enum"}),!c.ts.isVariableStatement(n))continue;const{declarations:h}=n.declarationList;if(h.length!==1)continue;const p=h[0],g=p.name.getText();if(!p.initializer||!c.ts.isCallExpression(p.initializer)){t[g]={type:"var"};continue}const a=p.initializer.arguments[0];if(!p.initializer.expression.getFullText().includes("/*#__PURE__*/Object.freeze")||!c.ts.isObjectLiteralExpression(a))continue;const s=[];for(const i of a.properties){if(!c.ts.isPropertyAssignment(i)||!(c.ts.isIdentifier(i.name)||c.ts.isStringLiteral(i.name))||i.name.text!=="__proto__"&&!c.ts.isIdentifier(i.initializer))throw new E(i,"Expected a property assignment");i.name.text!=="__proto__"&&s.push({exportedName:i.name.text,localName:i.initializer.getText()})}e.unshift({name:g,exports:s,location:o})}return{namespaces:e,itemTypes:t}}fix(){let e=this.sourceFile.getFullText();const{namespaces:t,itemTypes:n}=this.findNamespaces();for(const o of t){const h=e.slice(o.location.end);e=e.slice(0,o.location.start);for(const{exportedName:p,localName:g}of o.exports)if(p===g){const{type:a,generics:s}=n[g]||{};if(a==="interface"||a==="type"){const i=Je(s);e+=`type ${o.name}_${p}${i.in} = ${g}${i.out};
`}else if(a==="enum"||a==="class"){const i=Je(s);e+=`type ${o.name}_${p}${i.in} = ${g}${i.out};
`,e+=`declare const ${o.name}_${p}: typeof ${g};
`}else e+=`declare const ${o.name}_${p}: typeof ${g};
`}if(o.name){e+=`declare namespace ${o.name} {
`,e+=`  export {
`;for(const{exportedName:p,localName:g}of o.exports)p===g?e+=`    ${o.name}_${p} as ${p},
`:e+=`    ${g} as ${p},
`;e+=`  };
`,e+="}"}e+=o.textBeforeCodeAfter??"",e+=h}return e}}function Je(r){return!r||!r.length?{in:"",out:""}:{in:`<${r.map(e=>e.getText()).join(", ")}>`,out:`<${r.map(e=>e.name.getText()).join(", ")}>`}}b(Je,"renderTypeParams");let Qe=1;function rr(r){return N({type:"Program",sourceType:"module",body:[]},{start:r.getFullStart(),end:r.getEnd()})}b(rr,"createProgram");function nr(r){const e={type:"Identifier",name:String(Qe++)};return{ident:e,expr:{type:"AssignmentPattern",left:e,right:r}}}b(nr,"createReference");function O(r){return N({type:"Identifier",name:r.getText()},r)}b(O,"createIdentifier");function ar(r){const e=N({type:"FunctionExpression",id:null,params:[],body:{type:"BlockStatement",body:[]}},r),t=N({type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:String(Qe++)},arguments:[e],optional:!1}},r);return{fn:e,iife:t}}b(ar,"createIIFE");function sr(){const r={type:"ArrayExpression",elements:[]};return{expr:r,stmt:{type:"ReturnStatement",argument:r}}}b(sr,"createReturn");function ir(r,e){return N({type:"FunctionDeclaration",id:N({type:"Identifier",name:c.ts.idText(r)},r),params:[],body:{type:"BlockStatement",body:[]}},e)}b(ir,"createDeclaration");function I(r){if(c.ts.isLiteralExpression(r))return{type:"Literal",value:r.text};if(c.ts.isPropertyAccessExpression(r)){if(c.ts.isPrivateIdentifier(r.name))throw new E(r.name);return N({type:"MemberExpression",computed:!1,optional:!1,object:I(r.expression),property:I(r.name)},{start:r.expression.getStart(),end:r.name.getEnd()})}if(c.ts.isIdentifier(r))return O(r);if(r.kind==c.ts.SyntaxKind.NullKeyword)return{type:"Literal",value:null};throw new E(r)}b(I,"convertExpression");function N(r,e){let t="start"in e?e:{start:e.getStart(),end:e.getEnd()};return Object.assign(r,t)}b(N,"withStartEnd");function K(r,e){return(c.ts.getCombinedModifierFlags(r)&e)===e}b(K,"matchesModifier");function ur({sourceFile:r}){const e=new lt(r.getFullText()),t=new Set,n=new Set;let o="";const h=new Map,p=new Map;for(const f of r.statements){if(c.ts.isEmptyStatement(f)){e.remove(f.getStart(),f.getEnd());continue}if(c.ts.isEnumDeclaration(f)||c.ts.isFunctionDeclaration(f)||c.ts.isInterfaceDeclaration(f)||c.ts.isClassDeclaration(f)||c.ts.isTypeAliasDeclaration(f)||c.ts.isModuleDeclaration(f)){if(f.name){const d=f.name.getText();t.add(d),K(f,c.ts.ModifierFlags.ExportDefault)?o=d:K(f,c.ts.ModifierFlags.Export)&&n.add(d),f.flags&c.ts.NodeFlags.GlobalAugmentation||m(d,[ce(f),et(f)])}c.ts.isModuleDeclaration(f)&&or(e,f),Ze(e,f)}else if(c.ts.isVariableStatement(f)){const{declarations:d}=f.declarationList,y=K(f,c.ts.ModifierFlags.Export);for(const C of f.declarationList.declarations)if(c.ts.isIdentifier(C.name)){const k=C.name.getText();t.add(k),y&&n.add(k)}if(Ze(e,f),d.length==1){const C=d[0];c.ts.isIdentifier(C.name)&&m(C.name.getText(),[ce(f),et(f)])}else{const C=d.slice(),k=C.shift();m(k.name.getText(),[ce(f),k.getEnd()]);for(const R of C)c.ts.isIdentifier(R.name)&&m(R.name.getText(),[R.getFullStart(),R.getEnd()])}const{flags:v}=f.declarationList,x=`declare ${v&c.ts.NodeFlags.Let?"let":v&c.ts.NodeFlags.Const?"const":"var"} `,S=f.declarationList.getChildren().find(C=>C.kind===c.ts.SyntaxKind.SyntaxList).getChildren();let D=0;for(const C of S)if(C.kind===c.ts.SyntaxKind.CommaToken)D=C.getStart(),e.remove(D,C.getEnd());else if(D){e.appendLeft(D,`;
`);const k=C.getFullStart(),R=e.slice(k,C.getStart());let pe=R.length-R.trimStart().length;pe?e.overwrite(k,k+pe,x):e.appendLeft(k,x)}}}for(const f of r.statements)if(i(f),!!K(f,c.ts.ModifierFlags.ExportDefault)&&(c.ts.isFunctionDeclaration(f)||c.ts.isClassDeclaration(f))){if(f.name)continue;o||(o=l("export_default"));const d=f.getChildren(),y=d.findIndex(S=>S.kind===c.ts.SyntaxKind.ClassKeyword||S.kind===c.ts.SyntaxKind.FunctionKeyword),v=d[y],w=d[y+1];if(w.kind>=c.ts.SyntaxKind.FirstPunctuation&&w.kind<=c.ts.SyntaxKind.LastPunctuation){const S=e.slice(v.getEnd(),w.getStart())!=" ";e.appendLeft(w.getStart(),`${S?" ":""}${o}`)}else e.appendRight(v.getEnd(),` ${o}`)}for(const f of p.values()){const y=f.pop()[0];for(const v of f)e.move(v[0],v[1],y)}o&&e.append(`
export default ${o};
`),n.size&&e.append(`
export { ${[...n].join(", ")} };
`);for(const[f,d]of h.entries())e.prepend(`import * as ${d} from "${f}";
`);const g=r.getLineStarts(),a=new Set;for(const f of r.typeReferenceDirectives){a.add(f.fileName);const{line:d}=r.getLineAndCharacterOfPosition(f.pos),y=g[d];let v=r.getLineEndOfPosition(f.pos);e.slice(v,v+1)==`
`&&(v+=1),e.remove(y,v)}const s=new Set;for(const f of r.referencedFiles){s.add(f.fileName);const{line:d}=r.getLineAndCharacterOfPosition(f.pos),y=g[d];let v=r.getLineEndOfPosition(f.pos);e.slice(v,v+1)==`
`&&(v+=1),e.remove(y,v)}return{code:e,typeReferences:a,fileReferences:s};function i(f){if(c.ts.forEachChild(f,i),c.ts.isImportTypeNode(f)){if(!c.ts.isLiteralTypeNode(f.argument)||!c.ts.isStringLiteral(f.argument.literal))throw new E(f,"inline imports should have a literal argument");const d=f.argument.literal.text,y=f.getChildren(),v=y.find(D=>D.kind===c.ts.SyntaxKind.ImportKeyword).getStart();let w=f.getEnd();const x=y.find(D=>D.kind===c.ts.SyntaxKind.DotToken||D.kind===c.ts.SyntaxKind.LessThanToken);x&&(w=x.getStart());const S=u(d);e.overwrite(v,w,S)}}function u(f){let d=h.get(f);return d||(d=l(f.replace(/[^a-zA-Z0-9_$]/g,()=>"_")),h.set(f,d)),d}function l(f){let d=f;for(;t.has(d);)d=`_${d}`;return t.add(d),d}function m(f,d){let y=p.get(f);if(!y)y=[d],p.set(f,y);else{const v=y[y.length-1];v[1]===d[0]?v[1]=d[1]:y.push(d)}}}b(ur,"preProcess");function Ze(r,e){if(!c.ts.canHaveModifiers(e))return;let t=!1;const n=c.ts.isEnumDeclaration(e)||c.ts.isClassDeclaration(e)||c.ts.isFunctionDeclaration(e)||c.ts.isModuleDeclaration(e)||c.ts.isVariableStatement(e);for(const o of e.modifiers??[])switch(o.kind){case c.ts.SyntaxKind.ExportKeyword:case c.ts.SyntaxKind.DefaultKeyword:r.remove(o.getStart(),o.getEnd()+1);break;case c.ts.SyntaxKind.DeclareKeyword:t=!0}n&&!t&&r.appendRight(e.getStart(),"declare ")}b(Ze,"fixModifiers");function or(r,e){if(!(!e.body||!c.ts.isModuleBlock(e.body))){for(const t of e.body.statements)if(c.ts.isExportDeclaration(t)&&t.exportClause){if(c.ts.isNamespaceExport(t.exportClause))continue;for(const n of t.exportClause.elements)n.propertyName||r.appendLeft(n.name.getEnd(),` as ${n.name.getText()}`)}}}b(or,"duplicateExports");function ce(r){const e=r.getFullStart();return e+(tt(r,e)?1:0)}b(ce,"getStart");function et(r){const e=r.getEnd();return e+(tt(r,e)?1:0)}b(et,"getEnd");function tt(r,e){return r.getSourceFile().getFullText()[e]==`
`}b(tt,"newlineAt");const cr=new Set([c.ts.SyntaxKind.LiteralType,c.ts.SyntaxKind.VoidKeyword,c.ts.SyntaxKind.UnknownKeyword,c.ts.SyntaxKind.AnyKeyword,c.ts.SyntaxKind.BooleanKeyword,c.ts.SyntaxKind.NumberKeyword,c.ts.SyntaxKind.StringKeyword,c.ts.SyntaxKind.ObjectKeyword,c.ts.SyntaxKind.NullKeyword,c.ts.SyntaxKind.UndefinedKeyword,c.ts.SyntaxKind.SymbolKeyword,c.ts.SyntaxKind.NeverKeyword,c.ts.SyntaxKind.ThisKeyword,c.ts.SyntaxKind.ThisType,c.ts.SyntaxKind.BigIntKeyword]);class rt{static{b(this,"DeclarationScope")}constructor({id:e,range:t}){if(this.scopes=[],e)this.declaration=ir(e,t);else{const{iife:o,fn:h}=ar(t);this.iife=o,this.declaration=h}const n=sr();this.declaration.body.body.push(n.stmt),this.returnExpr=n.expr}pushScope(){this.scopes.push(new Set)}popScope(e=1){for(let t=0;t<e;t++)this.scopes.pop()}pushTypeVariable(e){const t=e.getText();this.scopes[this.scopes.length-1]?.add(t)}pushReference(e){let t;if(e.type==="Identifier"?t=e.name:e.type==="MemberExpression"&&e.object.type==="Identifier"&&(t=e.object.name),t){for(const h of this.scopes)if(h.has(t))return}if(t==="this")return;const{ident:n,expr:o}=nr(e);this.declaration.params.push(o),this.returnExpr.elements.push(n)}pushIdentifierReference(e){this.pushReference(O(e))}convertEntityName(e){return c.ts.isIdentifier(e)?O(e):N({type:"MemberExpression",computed:!1,optional:!1,object:this.convertEntityName(e.left),property:O(e.right)},e)}convertPropertyAccess(e){if(!c.ts.isIdentifier(e.expression)&&!c.ts.isPropertyAccessExpression(e.expression))throw new E(e.expression);if(c.ts.isPrivateIdentifier(e.name))throw new E(e.name);let t=c.ts.isIdentifier(e.expression)?O(e.expression):this.convertPropertyAccess(e.expression);return N({type:"MemberExpression",computed:!1,optional:!1,object:t,property:O(e.name)},e)}convertComputedPropertyName(e){if(!e.name||!c.ts.isComputedPropertyName(e.name))return;const{expression:t}=e.name;if(!(c.ts.isLiteralExpression(t)||c.ts.isPrefixUnaryExpression(t))){if(c.ts.isIdentifier(t))return this.pushReference(O(t));if(c.ts.isPropertyAccessExpression(t))return this.pushReference(this.convertPropertyAccess(t));throw new E(t)}}convertParametersAndType(e){this.convertComputedPropertyName(e);const t=this.convertTypeParameters(e.typeParameters);for(const n of e.parameters)this.convertTypeNode(n.type);this.convertTypeNode(e.type),this.popScope(t)}convertHeritageClauses(e){for(const t of e.heritageClauses||[])for(const n of t.types)this.pushReference(I(n.expression)),this.convertTypeArguments(n)}convertTypeArguments(e){if(e.typeArguments)for(const t of e.typeArguments)this.convertTypeNode(t)}convertMembers(e){for(const t of e){if(c.ts.isPropertyDeclaration(t)||c.ts.isPropertySignature(t)||c.ts.isIndexSignatureDeclaration(t)){c.ts.isPropertyDeclaration(t)&&t.initializer&&c.ts.isPropertyAccessExpression(t.initializer)&&this.pushReference(this.convertPropertyAccess(t.initializer)),this.convertComputedPropertyName(t),this.convertTypeNode(t.type);continue}if(c.ts.isMethodDeclaration(t)||c.ts.isMethodSignature(t)||c.ts.isConstructorDeclaration(t)||c.ts.isConstructSignatureDeclaration(t)||c.ts.isCallSignatureDeclaration(t)||c.ts.isGetAccessorDeclaration(t)||c.ts.isSetAccessorDeclaration(t))this.convertParametersAndType(t);else throw new E(t)}}convertTypeParameters(e){if(!e)return 0;for(const t of e)this.convertTypeNode(t.constraint),this.convertTypeNode(t.default),this.pushScope(),this.pushTypeVariable(t.name);return e.length}convertTypeNode(e){if(e&&!cr.has(e.kind)){if(c.ts.isTypeReferenceNode(e)){this.pushReference(this.convertEntityName(e.typeName)),this.convertTypeArguments(e);return}if(c.ts.isTypeLiteralNode(e))return this.convertMembers(e.members);if(c.ts.isArrayTypeNode(e))return this.convertTypeNode(e.elementType);if(c.ts.isTupleTypeNode(e)){for(const t of e.elements)this.convertTypeNode(t);return}if(c.ts.isNamedTupleMember(e)||c.ts.isParenthesizedTypeNode(e)||c.ts.isTypeOperatorNode(e)||c.ts.isTypePredicateNode(e))return this.convertTypeNode(e.type);if(c.ts.isUnionTypeNode(e)||c.ts.isIntersectionTypeNode(e)){for(const t of e.types)this.convertTypeNode(t);return}if(c.ts.isMappedTypeNode(e)){const{typeParameter:t,type:n,nameType:o}=e;this.convertTypeNode(t.constraint),this.pushScope(),this.pushTypeVariable(t.name),this.convertTypeNode(n),o&&this.convertTypeNode(o),this.popScope();return}if(c.ts.isConditionalTypeNode(e)){this.convertTypeNode(e.checkType),this.pushScope(),this.convertTypeNode(e.extendsType),this.convertTypeNode(e.trueType),this.convertTypeNode(e.falseType),this.popScope();return}if(c.ts.isIndexedAccessTypeNode(e)){this.convertTypeNode(e.objectType),this.convertTypeNode(e.indexType);return}if(c.ts.isFunctionOrConstructorTypeNode(e)){this.convertParametersAndType(e);return}if(c.ts.isTypeQueryNode(e)){this.pushReference(this.convertEntityName(e.exprName));return}if(c.ts.isRestTypeNode(e)){this.convertTypeNode(e.type);return}if(c.ts.isOptionalTypeNode(e)){this.convertTypeNode(e.type);return}if(c.ts.isTemplateLiteralTypeNode(e)){for(const t of e.templateSpans)this.convertTypeNode(t.type);return}if(c.ts.isInferTypeNode(e)){const{typeParameter:t}=e;this.convertTypeNode(t.constraint),this.pushTypeVariable(t.name);return}else throw new E(e)}}convertNamespace(e,t=!1){if(this.pushScope(),t&&e.body&&c.ts.isModuleDeclaration(e.body)){this.convertNamespace(e.body,!0);return}if(!e.body||!c.ts.isModuleBlock(e.body))throw new E(e,'namespace must have a "ModuleBlock" body.');const{statements:n}=e.body;for(const o of n){if(c.ts.isEnumDeclaration(o)||c.ts.isFunctionDeclaration(o)||c.ts.isClassDeclaration(o)||c.ts.isInterfaceDeclaration(o)||c.ts.isTypeAliasDeclaration(o)||c.ts.isModuleDeclaration(o)){if(o.name&&c.ts.isIdentifier(o.name))this.pushTypeVariable(o.name);else throw new E(o,"non-Identifier name not supported");continue}if(c.ts.isVariableStatement(o)){for(const h of o.declarationList.declarations)if(c.ts.isIdentifier(h.name))this.pushTypeVariable(h.name);else throw new E(h,"non-Identifier name not supported");continue}if(!c.ts.isExportDeclaration(o))throw new E(o,"namespace child (hoisting) not supported yet")}for(const o of n){if(c.ts.isVariableStatement(o)){for(const h of o.declarationList.declarations)h.type&&this.convertTypeNode(h.type);continue}if(c.ts.isFunctionDeclaration(o)){this.convertParametersAndType(o);continue}if(c.ts.isInterfaceDeclaration(o)||c.ts.isClassDeclaration(o)){const h=this.convertTypeParameters(o.typeParameters);this.convertHeritageClauses(o),this.convertMembers(o.members),this.popScope(h);continue}if(c.ts.isTypeAliasDeclaration(o)){const h=this.convertTypeParameters(o.typeParameters);this.convertTypeNode(o.type),this.popScope(h);continue}if(c.ts.isModuleDeclaration(o)){this.convertNamespace(o,t);continue}if(!c.ts.isEnumDeclaration(o))if(c.ts.isExportDeclaration(o)){if(o.exportClause){if(c.ts.isNamespaceExport(o.exportClause))throw new E(o.exportClause);for(const h of o.exportClause.elements){const p=h.propertyName||h.name;this.pushIdentifierReference(p)}}}else throw new E(o,"namespace child (walking) not supported yet")}this.popScope()}}function lr({sourceFile:r}){return new fr(r).transform()}b(lr,"convert");class fr{static{b(this,"Transformer")}constructor(e){this.sourceFile=e,this.declarations=new Map,this.ast=rr(e);for(const t of e.statements)this.convertStatement(t)}transform(){return{ast:this.ast}}pushStatement(e){this.ast.body.push(e)}createDeclaration(e,t){const n={start:e.getFullStart(),end:e.getEnd()};if(!t){const g=new rt({range:n});return this.pushStatement(g.iife),g}const o=t.getText(),h=new rt({id:t,range:n}),p=this.declarations.get(o);if(p){p.pushIdentifierReference(t),p.declaration.end=n.end;let g=this.ast.body.findIndex(a=>a==p.declaration);for(let a=g+1;a<this.ast.body.length;a++){const s=this.ast.body[a];s.start=s.end=n.end}}else this.pushStatement(h.declaration),this.declarations.set(o,h);return p||h}convertStatement(e){if(c.ts.isEnumDeclaration(e))return this.convertEnumDeclaration(e);if(c.ts.isFunctionDeclaration(e))return this.convertFunctionDeclaration(e);if(c.ts.isInterfaceDeclaration(e)||c.ts.isClassDeclaration(e))return this.convertClassOrInterfaceDeclaration(e);if(c.ts.isTypeAliasDeclaration(e))return this.convertTypeAliasDeclaration(e);if(c.ts.isVariableStatement(e))return this.convertVariableStatement(e);if(c.ts.isExportDeclaration(e)||c.ts.isExportAssignment(e))return this.convertExportDeclaration(e);if(c.ts.isModuleDeclaration(e))return this.convertNamespaceDeclaration(e);if(e.kind==c.ts.SyntaxKind.NamespaceExportDeclaration)return this.removeStatement(e);if(c.ts.isImportDeclaration(e)||c.ts.isImportEqualsDeclaration(e))return this.convertImportDeclaration(e);throw new E(e)}removeStatement(e){this.pushStatement(N({type:"ExpressionStatement",expression:{type:"Literal",value:"pls remove me"}},e))}convertNamespaceDeclaration(e){if(e.flags&c.ts.NodeFlags.GlobalAugmentation||!c.ts.isIdentifier(e.name)){this.createDeclaration(e).convertNamespace(e,!0);return}const n=this.createDeclaration(e,e.name);n.pushIdentifierReference(e.name),n.convertNamespace(e)}convertEnumDeclaration(e){this.createDeclaration(e,e.name).pushIdentifierReference(e.name)}convertFunctionDeclaration(e){if(!e.name)throw new E(e,"FunctionDeclaration should have a name");const t=this.createDeclaration(e,e.name);t.pushIdentifierReference(e.name),t.convertParametersAndType(e)}convertClassOrInterfaceDeclaration(e){if(!e.name)throw new E(e,"ClassDeclaration / InterfaceDeclaration should have a name");const t=this.createDeclaration(e,e.name),n=t.convertTypeParameters(e.typeParameters);t.convertHeritageClauses(e),t.convertMembers(e.members),t.popScope(n)}convertTypeAliasDeclaration(e){const t=this.createDeclaration(e,e.name),n=t.convertTypeParameters(e.typeParameters);t.convertTypeNode(e.type),t.popScope(n)}convertVariableStatement(e){const{declarations:t}=e.declarationList;if(t.length!==1)throw new E(e,"VariableStatement with more than one declaration not yet supported");for(const n of t){if(!c.ts.isIdentifier(n.name))throw new E(e,"VariableDeclaration must have a name");this.createDeclaration(e,n.name).convertTypeNode(n.type)}}convertExportDeclaration(e){if(c.ts.isExportAssignment(e)){this.pushStatement(N({type:"ExportDefaultDeclaration",declaration:I(e.expression)},e));return}const t=e.moduleSpecifier?I(e.moduleSpecifier):void 0;if(!e.exportClause)this.pushStatement(N({type:"ExportAllDeclaration",source:t,exported:null},e));else if(c.ts.isNamespaceExport(e.exportClause))this.pushStatement(N({type:"ExportAllDeclaration",source:t,exported:O(e.exportClause.name)},e));else{const n=[];for(const o of e.exportClause.elements)n.push(this.convertExportSpecifier(o));this.pushStatement(N({type:"ExportNamedDeclaration",declaration:null,specifiers:n,source:t},e))}}convertImportDeclaration(e){if(c.ts.isImportEqualsDeclaration(e)){if(!c.ts.isExternalModuleReference(e.moduleReference))throw new E(e,"ImportEquals should have a literal source.");this.pushStatement(N({type:"ImportDeclaration",specifiers:[{type:"ImportDefaultSpecifier",local:O(e.name)}],source:I(e.moduleReference.expression)},e));return}const t=I(e.moduleSpecifier),n=e.importClause&&e.importClause.namedBindings?this.convertNamedImportBindings(e.importClause.namedBindings):[];e.importClause&&e.importClause.name&&n.push({type:"ImportDefaultSpecifier",local:O(e.importClause.name)}),this.pushStatement(N({type:"ImportDeclaration",specifiers:n,source:t},e))}convertNamedImportBindings(e){return c.ts.isNamedImports(e)?e.elements.map(t=>{const n=O(t.name),o=t.propertyName?O(t.propertyName):n;return{type:"ImportSpecifier",local:n,imported:o}}):[{type:"ImportNamespaceSpecifier",local:O(e.name)}]}convertExportSpecifier(e){const t=O(e.name);return{type:"ExportSpecifier",exported:t,local:e.propertyName?O(e.propertyName):t}}}class pr{static{b(this,"ExportsFixer")}constructor(e){this.source=e,this.DEBUG=!!process.env.DTS_EXPORTS_FIXER_DEBUG}fix(){const e=this.findExports();return e.sort((t,n)=>t.location.start-n.location.start),this.getCodeParts(e).join("")}findExports(){const{rawExports:e,values:t,types:n}=this.getExportsAndLocals();return e.map(o=>{const h=o.elements.map(p=>{const g=p.name.text,a=p.propertyName?.text??p.name.text,s=n.some(i=>i.getText()===a)&&!t.some(i=>i.getText()===a)?"type":"value";return this.DEBUG&&console.log(`export ${a} as ${g} is a ${s}`),{exportedName:g,localName:a,kind:s}});return{location:{start:o.getStart(),end:o.getEnd()},exports:h}})}getExportsAndLocals(e=this.source.statements){const t=[],n=[],o=[],h=b(p=>{const{rawExports:g,values:a,types:s}=this.getExportsAndLocals(p);t.push(...g),n.push(...a),o.push(...s)},"recurseInto");for(const p of e)if(this.DEBUG&&console.log(p.getText(),p.kind),!c.ts.isImportDeclaration(p)){if(c.ts.isInterfaceDeclaration(p)||c.ts.isTypeAliasDeclaration(p)){this.DEBUG&&console.log(`${p.name.getFullText()} is a type`),o.push(p.name);continue}if(c.ts.isEnumDeclaration(p)||c.ts.isFunctionDeclaration(p)||c.ts.isClassDeclaration(p)||c.ts.isVariableStatement(p)){if(c.ts.isVariableStatement(p))for(const g of p.declarationList.declarations)c.ts.isIdentifier(g.name)&&(this.DEBUG&&console.log(`${g.name.getFullText()} is a value (from var statement)`),n.push(g.name));else p.name&&(this.DEBUG&&console.log(`${p.name.getFullText()} is a value (from declaration)`),n.push(p.name));continue}if(c.ts.isModuleBlock(p)){const g=p.statements;h(g);continue}if(c.ts.isModuleDeclaration(p)){p.name&&c.ts.isIdentifier(p.name)&&(this.DEBUG&&console.log(`${p.name.getFullText()} is a value (from module declaration)`),n.push(p.name)),h(p.getChildren());continue}if(c.ts.isExportDeclaration(p)){if(p.moduleSpecifier||p.isTypeOnly)continue;const g=p.exportClause;if(!g||!c.ts.isNamedExports(g))continue;t.push(g);continue}this.DEBUG&&console.log("unhandled statement",p.getFullText(),p.kind)}return{rawExports:t,values:n,types:o}}createNamedExport(e,t=!1){return`${!t&&e.kind==="type"?"type ":""}${e.localName}${e.localName===e.exportedName?"":` as ${e.exportedName}`}`}getCodeParts(e){let t=0;const n=this.source.getFullText(),o=[];for(const h of e){const p=n.slice(t,h.location.start);p.length>0&&o.push(p),o.push(this.getExportStatement(h)),t=h.location.end}return t<n.length&&o.push(n.slice(t)),o}getExportStatement(e){const t=e.exports.every(n=>n.kind==="type")&&e.exports.length>0;return`${t?"type ":""}{ ${e.exports.map(n=>this.createNamedExport(n,t)).join(", ")} }`}}function q(r,e){return c.ts.createSourceFile(r,e,c.ts.ScriptTarget.Latest,!0)}b(q,"parse");const dr=b(()=>{const r=new Map,e=new Map;return{name:"dts-transform",options({onLog:t,...n}){return{...n,onLog(o,h,p){o==="warn"&&h.code=="CIRCULAR_DEPENDENCY"||(t?t(o,h,p):p(o,h))},treeshake:{moduleSideEffects:"no-external",propertyReadSideEffects:!0,unknownGlobalSideEffects:!1}}},outputOptions(t){return{...t,chunkFileNames:t.chunkFileNames||"[name]-[hash].d.ts",entryFileNames:t.entryFileNames||"[name].d.ts",format:"es",exports:"named",compact:!1,freeze:!0,interop:"esModule",generatedCode:Object.assign({symbols:!1},t.generatedCode),strict:!1}},transform(t,n){let o=q(n,t);const h=ur({sourceFile:o});r.set(o.fileName,h.typeReferences),e.set(o.fileName,h.fileReferences),t=h.code.toString(),o=q(n,t);const p=lr({sourceFile:o});return process.env.DTS_DUMP_AST&&(console.log(n),console.log(t),console.log(JSON.stringify(p.ast.body,void 0,2))),{code:t,ast:p.ast,map:h.code.generateMap()}},renderChunk(t,n,o){const h=q(n.fileName,t),p=new tr(h),g=new Set,a=new Set;for(const u of Object.keys(n.modules)){for(const l of r.get(u.split("\\").join("/"))||[])g.add(l);for(const l of e.get(u.split("\\").join("/"))||[])if(l.startsWith(".")){const m=T.join(T.dirname(u),l),f=o.file&&T.dirname(o.file)||n.facadeModuleId&&T.dirname(n.facadeModuleId)||".";let d=T.relative(f,m).split("\\").join("/");d[0]!=="."&&(d="./"+d),a.add(d)}else a.add(l)}let s=nt(Array.from(a,u=>`/// <reference path="${u}" />`));return s+=nt(Array.from(g,u=>`/// <reference types="${u}" />`)),s+=p.fix(),s||(s+=`
export { }`),{code:new pr(q(n.fileName,s)).fix(),map:{mappings:""}}}}},"transform");function nt(r){return r.length?r.join(`
`)+`
`:""}b(nt,"writeBlock");const le=/\.([cm]ts|[tj]sx?)$/;function fe({programs:r,resolvedOptions:{compilerOptions:e,tsconfig:t}},n,o){if(!r.length&&B.test(n))return{code:o};const h=r.find(p=>!!p.getSourceFile(n));if(h){const p=h.getSourceFile(n);return{code:p?.getFullText(),source:p,program:h}}else if(c.ts.sys.fileExists(n)){const p=Yt(n,e,t);r.push(p);const g=p.getSourceFile(n);return{code:g?.getFullText(),source:g,program:p}}else return null}b(fe,"getModule");const at=b((r={})=>{const e=dr(),t={programs:[],resolvedOptions:Ht(r)};return{name:"dts",outputOptions:e.outputOptions,renderChunk:e.renderChunk,options(n){let{input:o=[]}=n;if(!Array.isArray(o))o=typeof o=="string"?[o]:Object.values(o);else if(o.length>1){n.input={};for(const h of o){let p=h.replace(/((\.d)?\.(c|m)?(t|j)sx?)$/,"");T.isAbsolute(h)?p=T.basename(p):p=T.normalize(p),n.input[p]=h}}return t.programs=Jt(Object.values(o),t.resolvedOptions.compilerOptions,t.resolvedOptions.tsconfig),e.options.call(this,n)},transform(n,o){if(!le.test(o))return null;const h=b(s=>{if(s.program){const i=T.dirname(o);s.program.getSourceFiles().map(l=>l.fileName).filter(l=>l.startsWith(i)).forEach(this.addWatchFile)}},"watchFiles"),p=b(()=>{const s=fe(t,o,n);return s?(h(s),e.transform.call(this,s.code,o)):null},"handleDtsFile"),g=b(()=>{const s=o.replace(le,Xe);let i=fe(t,s,n);return i?(h(i),e.transform.call(this,i.code,s)):null},"treatTsAsDts"),a=b(()=>{const s=fe(t,o,n);if(!s||!s.source||!s.program)return null;h(s);const i=o.replace(le,Xe);let u;const{emitSkipped:l,diagnostics:m}=s.program.emit(s.source,(f,d)=>{u=e.transform.call(this,d,i)},void 0,!0);if(l){const f=m.filter(d=>d.category===c.ts.DiagnosticCategory.Error);f.length&&(console.error(c.ts.formatDiagnostics(f,ue)),this.error("Failed to compile. Check the logs above."))}return u},"generateDtsFromTs");return B.test(o)?p():g()??a()},resolveId(n,o){if(!o)return;o=o.split("\\").join("/");let h=t.resolvedOptions.compilerOptions;if(t.resolvedOptions.tsconfig){const g=n.startsWith(".")?T.resolve(T.dirname(o),n):n;h=oe(g,t.resolvedOptions.compilerOptions,t.resolvedOptions.tsconfig).compilerOptions}const{resolvedModule:p}=c.ts.resolveModuleName(n,o,h,c.ts.sys);if(p)return!t.resolvedOptions.respectExternal&&p.isExternalLibraryImport?{id:n,external:!0}:{id:T.resolve(p.resolvedFileName)}}}},"plugin");exports.default=at,exports.dts=at;
